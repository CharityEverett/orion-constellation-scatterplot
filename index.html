``<!DOCTYPE html>
<html>
<head>
    <title>Star Visualization</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
</head>
<body>
    <a-scene renderer="precision: medium">
        <!-- Lighting -->
        <a-entity light="type: ambient; color: #FFF; intensity: 0.8"></a-entity>
        <a-entity light="type: directional; color: #FFF; intensity: 1" position="-1 1 0"></a-entity>

        <!-- Reference sphere -->
        <a-sphere position="0 0 -5" 
                  radius="1" 
                  color="#FF4500"
                  material="shader: flat; opacity: 0.8"
                  class="clickable">
        </a-sphere>

        <!-- Stars container -->
        <a-entity id="starfield"></a-entity>
        
        <!-- Skybox -->
<a-sky src="https://cdn.glitch.global/5cfc02c2-e08f-4e29-9383-05c3fa57335f/skybox_equirectangular.png?v=1732135394692"></a-sky>
        
        <!-- Camera rig -->
        <a-entity position="0 1.6 0">
            <a-camera look-controls wasd-controls>
                <a-cursor
                    id="cursor"
                    material="color: white; shader: flat"
                    position="0 0 -1"
                    geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                    raycaster="objects: .clickable">
                </a-cursor>
            </a-camera>
        </a-entity>
    </a-scene>

    <script>
       document.addEventListener('DOMContentLoaded', function() {
    const starfield = document.getElementById('starfield');
    
    fetch('https://dieghernan.github.io/celestial_data/data/stars.6.geojson')
        .then(response => response.json())
        .then(data => {
            const stars = data.features
                .filter(star => star.properties.mag < 5)
                .slice(0, 200);

            stars.forEach(star => {
                const sphere = document.createElement('a-sphere');
                // Handle 2D coordinates case
                const coords = star.geometry.coordinates;
                const x = coords[0];
                const y = coords[1];
                const z = coords.length > 2 ? coords[2] : 0;
                
                // Adjust scale factor to keep stars in view
                const scaleFactor = 0.05; // Reduced from 0.2
                
                // Use string format for position
                sphere.setAttribute('position', 
                    `${x * scaleFactor} ${y * scaleFactor} ${-5}`);

                // Calculate luminosity based on star magnitude
             stars.forEach(star => {
    const sphere = document.createElement('a-sphere');
    const magnitude = star.properties.mag;
    
    // Use magnitude range to scale stars
    // Brightest stars (lowest magnitude) should be size 1.0 (matching test sphere)
    const maxSize = 1.0;  // Match the test sphere size
    const minSize = 0.1;  // Smallest star size
    
    // Calculate size based on magnitude (lower magnitude = brighter = bigger)
    const luminosityFactor = Math.max(0.1, (6 - magnitude) / 6);
    const finalSize = maxSize * luminosityFactor;
    
    sphere.setAttribute('radius', finalSize);
    sphere.setAttribute('color', '#FF4500');  // Match test sphere color
    sphere.setAttribute('material', {
        shader: 'flat',
        opacity: 0.8
    });
    
    starfield.appendChild(sphere);
});
    })
})
        .catch(error => console.error('Error:', error));
});
                     
    </script>
</body>
</html>
